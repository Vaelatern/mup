#!/bin/sh

if [ "$(uname)" != "Linux" ] || [ "$(uname -m)" != "x86_64" ]; then
  echo "Error: for now prebuilt binaries are only available for Linux x86_64."
  exit 1
fi

TMP_FILE=$(mktemp /tmp/mup.XXXXXX)

echo "Downloading latest version from GitHub releases..."
wget -q --show-progress -O "$TMP_FILE" https://github.com/aziis98/mup/releases/latest/download/mup

if [ $? -ne 0 ]; then
  echo "Error: Failed to download mup."
  exit 1
fi

echo "Download completed."

chmod +x "$TMP_FILE"

mkdir -p "$HOME/.local/bin"

echo "Moving mup to $HOME/.local/bin..."
mv "$TMP_FILE" "$HOME/.local/bin/mup"

if ! echo "$PATH" | grep -q "$HOME/.local/bin"; then
  echo "Warning: $HOME/.local/bin is not in your PATH. You may need to add it."
  echo "Add the following line to your shell configuration file:"
  echo
  echo '  export PATH="$HOME/.local/bin:$PATH"'
  echo
fi

echo "Installation completed successfully."
